<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-22054303-1"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-22054303-1");
  </script>

  <meta charset="UTF-8"/>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
/>
  <link rel="icon" href="/favicon.ico?v=d41d8cd98f00b204e9800998ecf8427e" type="image/png">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=d41d8cd98f00b204e9800998ecf8427e">
  <link rel="manifest" href="/manifest.webmanifest?v=d41d8cd98f00b204e9800998ecf8427e">
  <meta name="msapplication-TileColor" content="#ffffff"/>
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/>
  <meta name="theme-color" content="#ffffff"/>
  <link
    rel="preload"
    href="https://unpkg.com/prism-themes@1.9.0/themes/prism-one-light.min.css"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'"
/>
  <noscript
    ><link
      rel="stylesheet"
      href="https://unpkg.com/prism-themes@1.9.0/themes/prism-one-light.min.css"
/></noscript>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Rethink+Sans:ital,wght@0,400..800;1,400..800&display=swap"
    rel="stylesheet"
/>
  <link href="/css/style.css?v=d41d8cd98f00b204e9800998ecf8427e" rel="stylesheet">
  
  
  











<title>White Labeling, Vue CLI &amp; PWA - Praveen Puglia</title>
<meta property="og:site_name" content="Praveen Puglia"/>
<meta property="og:title" content="White Labeling, Vue CLI &amp; PWA - Praveen Puglia"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://praveenpuglia.com/posts/white-labeling-vue-cli-pwa/"/>
<meta property="twitter:url" content="https://praveenpuglia.com/posts/white-labeling-vue-cli-pwa/"/>
<meta property="twitter:site" content="Praveen Puglia"/>


  <meta
  name="twitter:creator"
  content="@praveenpuglia"
/>


<meta name="description" content="Using Vue CLI PWA plugin to dynamically generate service worker assets for different clients"/>
<meta name="twitter:description" content="Using Vue CLI PWA plugin to dynamically generate service worker assets for different clients"/>
<meta property="og:description" content="Using Vue CLI PWA plugin to dynamically generate service worker assets for different clients"/>


  <meta property="og:image" content="https://praveenpuglia.com/assets/images/home-banner-mobile.avif"/>
  <meta name="twitter:image" content="https://praveenpuglia.com/assets/images/home-banner-mobile.avif"/>



  <style>
     ::view-transition-old(post-case-for-strict-pascal-case) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-case-for-strict-pascal-case) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-secret-page-dev-info-vite-react) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-secret-page-dev-info-vite-react) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-white-labeling-vue-cli-pwa) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-white-labeling-vue-cli-pwa) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-how-to-use-avif-today) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-how-to-use-avif-today) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-how-to-import-markdown-files-in-vue-cli-typescript-project) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-how-to-import-markdown-files-in-vue-cli-typescript-project) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-my-graphql-schema-types-generation-workflow copy) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-my-graphql-schema-types-generation-workflow copy) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-import-sass-variables-in-javascript-with-webpack) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-import-sass-variables-in-javascript-with-webpack) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-managing-mixins-and-utils-in-vue) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-managing-mixins-and-utils-in-vue) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-why-vue-is-so-awesome) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-why-vue-is-so-awesome) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-nicer-imports-with-webpack-aliases) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-nicer-imports-with-webpack-aliases) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-reusing-areas-in-css-grid) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-reusing-areas-in-css-grid) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-animating-css-snake-art) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-animating-css-snake-art) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-css-toggle-function) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-css-toggle-function) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-make-your-web-apps-little-more-native) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-make-your-web-apps-little-more-native) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-people-i-learn-from) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-people-i-learn-from) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-introducing-poppins) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-introducing-poppins) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-meeting-lea-and-chris) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-meeting-lea-and-chris) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-finding-unique-color-strings-in-project) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-finding-unique-color-strings-in-project) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-talks-that-impress) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-talks-that-impress) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-ready-steady-gulp) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-ready-steady-gulp) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-first-scss-experiment-a-blurry-world) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-first-scss-experiment-a-blurry-world) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-tree-style-directory-structure-powershell) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-tree-style-directory-structure-powershell) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-the-right-html-element-for-icons) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-the-right-html-element-for-icons) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-make-wamp-work-on-windows-10-technical-preview) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-make-wamp-work-on-windows-10-technical-preview) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-xiaomi-redmi-1s-is-a-powerful-product-with-bad-design) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-xiaomi-redmi-1s-is-a-powerful-product-with-bad-design) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-so-you-love-in-ternational-brands) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-so-you-love-in-ternational-brands) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-design-story-independence-day-cover-photo) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-design-story-independence-day-cover-photo) {
      animation: fade 0.2s ease-in-out reverse;
    }

   ::view-transition-old(post-how-i-have-settled-down-to-inconsolata-for-codes) {
      animation: fade 0.2s ease-in-out forwards;
    }

    ::view-transition-new(post-how-i-have-settled-down-to-inconsolata-for-codes) {
      animation: fade 0.2s ease-in-out reverse;
    }

  
  </style>
  <script type="speculationrules">
    {
      "prerender": [
        {
          "source": "document",
          "where": {
            "href_matches": "/*"
          },
          "eagerness": "moderate"
        }
      ]
    }
  </script>
</head>
  <body>
    <div class="site-header">
  <header class="main-header">
    <a href="/">
      <h3 class="main-header-logo bold">Praveen Puglia</h3>
    </a>
    <nav role="navigation" class="main-navigation" aria-label="Main Navigation">
      <ul class="navigation-links">
        <li class="navigation-link-item">
          <a class="navigation-link" href="/posts">Posts</a>
        </li>
      </ul>
    </nav>
  </header>
</div>

    <div class="container">
      <article class="single-post">
  <div class="single-post__header">
    <h1 class="title" style="view-transition-name: post-white-labeling-vue-cli-pwa">White Labeling, Vue CLI &amp; PWA</h1>
    <h4 class="subtitle">Using Vue CLI PWA plugin to dynamically generate service worker assets for different clients</h4>
    <div class="post__metadata">
      <time datetime="2021-07-17">17 Jul, 2021</time>
      <ul class="post__metadata__tags">
          <li class="post__metadata__tag">
            vue.js
          </li>
          <li class="post__metadata__tag">
            pwa
          </li>
          <li class="post__metadata__tag">
            javascript
          </li>
          <li class="post__metadata__tag">
            white-labeling
          </li>
      </ul>
    </div>
  </div>

  <p>At <a href="https://voicezen.ai/">Voicezen</a>, I have been fortunate enough to work on a platform that has to be white-labelled. But what does it mean to be white-labelled?</p>
<blockquote>
<p>A <strong>white-label product</strong> is a <a href="https://en.wikipedia.org/wiki/Product_(business)">product</a> or service produced by one company (the <a href="https://en.wikipedia.org/wiki/Production_(economics)">producer</a>) that other companies (the <a href="https://en.wikipedia.org/wiki/Marketing">marketers</a>) <a href="https://en.wikipedia.org/wiki/Rebranding">rebrand</a> to make it appear as if they had made it. - Wikipedia</p>
</blockquote>
<p>We serve the same product to multiple clients with various needs and to their users, it should look like as if the client company made it. This requires paying attention to a bunch of things like</p>
<ul>
<li>Brand colors.</li>
<li>Typography.</li>
<li>Logos.</li>
<li>Other aspects of theming.</li>
<li>Nomenclature customization.</li>
<li><strong>Sitle title / PWA installer customization etc</strong></li>
</ul>
<p>Today, I am briefly going to touch upon how we achieve the last one. I'll probably write more about the other points in later posts.</p>
<p>We chose to tackle the last point first because that's the immediate and persistent thing that users notice when they open any app on browser. The title stays on the tab as long as they are on the app so it makes sense to start there.</p>
<p>If the app is a PWA, it becomes necessary to get the illusion right by making sure that the browser prompt for the app installer reflects the client's title and logo.</p>
<p>On the engineering side, it means that we have to dynamically generate the manifests for our PWA, the logos, the title etc.</p>
<p>We use <a href="https://cli.vuejs.org/">Vue CLI</a> and along with that the <a href="https://cli.vuejs.org/core-plugins/pwa.html">Vue CLI PWA Plugin</a>. The first step is to have the assets / app-icons for each client in a separate, public directory. With a Vue CLI project we get a root level <code>public</code> directory. Here's what that looks like after our changes.</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">.</span>
├── img
│   └── icons
│       ├── batman
│       │   ├── android-icon-144x144.png
│       │   ├── android-icon-192x192.png
│       │   ├── android-icon-36x36.png
│       │   ├── android-icon-48x48.png
│       │   ├── android-icon-72x72.png
│       │   ├── android-icon-96x96.png
│       │   ├── apple-icon-152x152.png
│       │   ├── favicon-16x16.png
│       │   ├── favicon-32x32.png
│       │   └── favicon.ico
│       ├── superman
│       │   ├── android-icon-144x144.png
│       │   ├── android-icon-192x192.png
│       │   ├── android-icon-36x36.png
│       │   ├── android-icon-48x48.png
│       │   ├── android-icon-72x72.png
│       │   ├── android-icon-96x96.png
│       │   ├── apple-icon-152x152.png
│       │   ├── favicon-16x16.png
│       │   ├── favicon-32x32.png
│       │   └── favicon.ico
│       └── default
│           ├── android-icon-144x144.png
│           ├── android-icon-192x192.png
│           ├── android-icon-36x36.png
│           ├── android-icon-48x48.png
│           ├── android-icon-72x72.png
│           ├── android-icon-96x96.png
│           ├── apple-icon-152x152.png
│           ├── favicon-16x16.png
│           ├── favicon-32x32.png
│           └── favicon.ico
├── index.html
└── robots.txt</code></pre>
<p>We have 2 clients and then the <code>default</code> client which is a fallback. We'll talk about that in a bit.</p>
<p>The next piece of the puzzle is to identify which client are we building the dist for. For that, we use <code>.env</code> files. When we build our application, we specify the client by adding the following in our <code>.env.production</code> file.</p>
<pre class="language-text"><code class="language-text">VUE_APP_CLIENT_ID=batman</code></pre>
<p>For convenience, we have created a bunch of <code>.env.CLIENT.local</code> files so we can build client specific dists without having to modify <code>.env.production</code> again and again.</p>
<pre class="language-bash"><code class="language-bash">.env.batman.local
.env.superman.local</code></pre>
<p>In each of these we set <code>NODE_ENV=production</code> and the <code>VUE_APP_CLIENT_ID</code> to their respective IDs. This allows us to do something like this.</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># generate production dist for batman</span>
<span class="token function">yarn</span> build <span class="token parameter variable">--mode</span><span class="token operator">=</span>batman</code></pre>
<p>Note that our icon directory name matches the <code>VUE_APP_CLIENT_ID</code> variable.</p>
<p>The next part is to use this ID to resolve things like</p>
<ul>
<li>What should be the human readable title for this client?</li>
<li>Which icons should be put into the manifest?</li>
<li>Which colors to use? etc.</li>
</ul>
<p>For this, we use a simple map that gives us all the necessary information.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// client-metadata.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> clientMetadata <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">batman</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"The Dark Knight!"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">primary</span><span class="token operator">:</span> <span class="token string">"#080808"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">accent</span><span class="token operator">:</span> <span class="token string">"#AE8875"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">superman</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Man of Steel"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">primary</span><span class="token operator">:</span> <span class="token string">"#bb070e"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">accent</span><span class="token operator">:</span> <span class="token string">"#0099f7"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Voicezen"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>With this, we now move to our final setup which is to instruct Vue CLI to genreate all the stuff necessary for a particular client.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// vue.config.js</span>

<span class="token comment">// we use this package to get the current git hash.</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> gitDescribeSync <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"git-describe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> allClientsMetadata <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./src/assets/client-metadata.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clientId <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_CLIENT_ID</span> <span class="token operator">??</span> <span class="token string">"default"</span><span class="token punctuation">;</span>

<span class="token comment">// get the metedata.</span>
<span class="token keyword">const</span> clientMetadata <span class="token operator">=</span> allClientsMetadata<span class="token punctuation">[</span>clientId<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// notify which client we are working with</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">🚀 Building for Client : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientMetadata<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// setup pwa plugin options</span>
  <span class="token literal-property property">pwa</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> clientMetadata<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
    <span class="token literal-property property">workboxPluginMode</span><span class="token operator">:</span> <span class="token string">"InjectManifest"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">workboxOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// since we use InjectManifest option, we provide our own</span>
      <span class="token comment">// service worker to start with.</span>
      <span class="token literal-property property">swSrc</span><span class="token operator">:</span> <span class="token string">"./src/sw.js"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">swDest</span><span class="token operator">:</span> <span class="token string">"service-worker.js"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">manifestOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">short_name</span><span class="token operator">:</span> clientMetadata<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
      <span class="token literal-property property">icons</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/android-icon-36x36.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"36x36"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/android-icon-48x48.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"48x48"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/android-icon-72x72.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"72x72"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/android-icon-96x96.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"96x96"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/android-icon-144x144.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"144x144"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/android-icon-192x192.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"192x192"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">background_color</span><span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">"standalone"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">themeColor</span><span class="token operator">:</span> clientMetadata<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>primary<span class="token punctuation">,</span>

    <span class="token literal-property property">iconPaths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">favicon32</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/favicon-32x32.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">favicon16</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/favicon-16x16.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">appleTouchIcon</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/apple-icon-152x152.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">assetsVersion</span><span class="token operator">:</span> <span class="token function">gitDescribeSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hash<span class="token punctuation">,</span> <span class="token comment">// this allows easy cache-busting</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Here's what the input service worker file looks like.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// src/sw.js</span>

<span class="token comment">/* eslint-disable */</span>
<span class="token comment">// This is the code piece that GenerateSW mode can't provide for us.</span>
<span class="token comment">// This code listens for the user's confirmation to update the app.</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"skipWaiting"</span><span class="token operator">:</span>
      self<span class="token punctuation">.</span><span class="token function">skipWaiting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token comment">// NOOP</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

workbox<span class="token punctuation">.</span>core<span class="token punctuation">.</span><span class="token function">clientsClaim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Vue CLI 4 and Workbox v4, else</span>
<span class="token comment">// workbox.clientsClaim(); // Vue CLI 3 and Workbox v3.</span>

<span class="token comment">// The precaching code provided by Workbox.</span>
self<span class="token punctuation">.</span>__precacheManifest <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__precacheManifest <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// workbox.precaching.suppressWarnings(); // Only used with Vue CLI 3 and Workbox v3.</span>
workbox<span class="token punctuation">.</span>precaching<span class="token punctuation">.</span><span class="token function">precacheAndRoute</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__precacheManifest<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This setup ensures that our PWA manifests and assets are generated for the client we are building the dist. You can tweak the PWA plugin configuration to add more details for different browsers and platforms.</p>
<p>More reading -</p>
<ul>
<li><a href="https://developers.google.com/web/fundamentals/primers/service-workers">Service Workers</a></li>
<li><a href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin">Workbox Webpack Plugin</a></li>
</ul>

</article>

    </div>
    <div class="site-footer">
  <footer class="footer-content">
  <p>With ❤️ from  Praveen Puglia</p>
  <ul class="social-links">
    <li class="navigation-link-item navigation-link-item--social">
        <a target="_blank" class="navigation-link" href="https://linkedin.com/in/praveenpuglia">
          LinkedIn
        </a>
      </li>
      <li class="navigation-link-item navigation-link-item--social">
        <a target="_blank" class="navigation-link" href="https://github.com/praveenpuglia">
          GitHub
        </a>
      </li>
      <li class="navigation-link-item navigation-link-item--social">
        <a target="_blank" class="navigation-link" href="https://codepen.io/praveenpuglia">
          CodePen
        </a>
      </li>
      <li class="navigation-link-item navigation-link-item--social">
        <a target="_blank" class="navigation-link" href="https://twitter.com/praveenpuglia">
          Twitter
        </a>
      </li>
  </div>
</footer>
</div>

  </body>
</html>